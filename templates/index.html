{% extends "base.html" %}

{% block title %}Create New Dispute - ODR{% endblock %}

{% block content %}
<h1>Online Dispute Resolution</h1>
<p class="subtitle">Create a new dispute and let the algorithm help you reach an agreement</p>

<div class="info-box">
    <strong>How it works:</strong>
    <ul style="margin-left: 20px; margin-top: 10px;">
        <li>Two players negotiate over a payment amount</li>
        <li>Each round, both submit offers/demands simultaneously</li>
        <li>If offers overlap, the algorithm proposes the midpoint</li>
        <li>Both players vote on the proposal</li>
        <li>Agreement reached when both accept, or continue to next round</li>
    </ul>
</div>

<form method="POST" action="/create_dispute">
    <h2>Players</h2>
    <div class="form-group">
        <label for="userA">Player 1 Username (Claimant):</label>
        <input type="text" id="userA" name="userA" required placeholder="e.g., Alice">
    </div>
    
    <div class="form-group">
        <label for="userB">Player 2 Username (Respondent):</label>
        <input type="text" id="userB" name="userB" required placeholder="e.g., Bob">
    </div>
    
    <h2>Initial Public Positions</h2>
    <div class="info-box">
        <strong>Note:</strong> These opening positions are public to both players. Each player will then privately set their walk-away values.
    </div>
    
    <div class="form-group">
        <label for="c">Player 1's Opening Demand:</label>
        <input type="number" id="c" name="c" step="0.01" required placeholder="e.g., 1500">
        <p class="help-text">The amount Player 1 is initially demanding</p>
    </div>
    
    <div class="form-group">
        <label for="s">Player 2's Opening Offer:</label>
        <input type="number" id="s" name="s" step="0.01" required placeholder="e.g., 800">
        <p class="help-text">The amount Player 2 is initially offering (must be less than Player 1's demand)</p>
    </div>
    
    <button type="submit">Create Dispute</button>
</form>

<script>
    // Validate that c > s
    document.querySelector('form').addEventListener('submit', function(e) {
        const c = parseFloat(document.getElementById('c').value);
        const s = parseFloat(document.getElementById('s').value);
        
        if (c <= s) {
            e.preventDefault();
            alert('Player 1\'s offer must be greater than Player 2\'s counteroffer');
        }
    });
</script>
{% endblock %}
